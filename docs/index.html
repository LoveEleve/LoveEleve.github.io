<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>LoveEleve's Tech Blog</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta name="referrer" content="no-referrer">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/sidebar.min.css" />
  
  <style>
    :root {
      --theme-color: #42b983;
      --sidebar-width: 250px;
      --content-max-width: 850px;
      --base-font-size: 13px;
    }
    
    /* 侧边栏首页简洁逻辑 */
    .sidebar-nav a[href="#/"] + ul,
    .sidebar-nav a[href="#/README"] + ul { display: none !important; }
    .sidebar-nav a[href="#/"]::after,
    .sidebar-nav a[href="#/README"]::after { display: none !important; }

    /* --- 极致代码块 UI --- */
    pre[class*="language-"] {
      position: relative !important;
      margin: 1.5em 0 !important;
      padding: 3em 1.2em 1.2em !important; /* 顶部留出工具栏空间 */
      border-radius: 8px !important;
      border: 1px solid rgba(0,0,0,0.06) !important;
      background: #fdfdfd !important;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      max-height: 2000px;
      overflow: hidden;
    }

    /* 代码块折叠态 */
    pre.is-collapsed {
      max-height: 42px !important;
      padding-bottom: 0 !important;
      cursor: pointer;
    }

    /* 顶部统一工具栏 */
    .code-tools {
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 32px;
      padding: 0 12px;
      background: #f6f8fa;
      border-bottom: 1px solid rgba(0,0,0,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 10;
    }
    .code-tools-left {
      font-size: 11px;
      color: #aaa;
      font-weight: bold;
      text-transform: uppercase;
    }
    .code-tools-right {
      display: flex;
      gap: 12px;
    }
    .tool-btn {
      font-size: 11px;
      color: var(--theme-color);
      cursor: pointer;
      font-weight: 500;
      transition: opacity 0.2s;
    }
    .tool-btn:hover { opacity: 0.7; }

    /* 隐藏 Docsify 原生复制按钮，使用我们的自定义按钮 */
    .docsify-copy-code-button {
      display: none !important;
    }

    /* 侧边栏样式 */
    .sidebar-nav > ul > li { margin: 10px 0; font-weight: bold; font-size: 14px; }
  </style>
</head>
<body>
  <div id="app">正在恢复系统 (V9.0)...</div>
  <script>
    window.$docsify = {
      name: 'LoveEleve',
      repo: 'https://github.com/LoveEleve/LoveEleve.github.io',
      loadSidebar: true,
      alias: { '/.*/_sidebar.md': '/_sidebar.md' },
      subMaxLevel: 3,
      sidebarDisplayLevel: 0,
      executeScript: true,
      requestHeaders: { 'cache-control': 'max-age=0' },
      auto2top: true,
      
      plugins: [
        function(hook, vm) {
          hook.doneEach(function() {
            // 修复侧边栏加载（强制刷新侧边栏）
            if (vm.compiler && vm.compiler.sidebar) {
                // Docsify 内部会自动处理
            }

            // 增强代码块
            document.querySelectorAll('pre[data-lang]').forEach(function(pre) {
              if (pre.querySelector('.code-tools')) return;

              const lang = pre.getAttribute('data-lang');
              
              // 创建工具栏
              const tools = document.createElement('div');
              tools.className = 'code-tools';
              tools.innerHTML = `
                <div class="code-tools-left">${lang}</div>
                <div class="code-tools-right">
                  <span class="tool-btn btn-copy">复制</span>
                  <span class="tool-btn btn-toggle">收起代码</span>
                </div>
              `;

              pre.insertBefore(tools, pre.firstChild);

              // 复制功能
              tools.querySelector('.btn-copy').onclick = function(e) {
                e.stopPropagation();
                const code = pre.innerText.replace(lang + '\n收起代码复制\n', '').replace(lang + '\n展开代码复制\n', '');
                navigator.clipboard.writeText(code).then(() => {
                  this.innerText = '已复制';
                  setTimeout(() => { this.innerText = '复制'; }, 1500);
                });
              };

              // 折叠功能
              const toggleBtn = tools.querySelector('.btn-toggle');
              const handleToggle = function(e) {
                if(e) e.stopPropagation();
                const isCollapsed = pre.classList.toggle('is-collapsed');
                toggleBtn.innerText = isCollapsed ? '展开代码' : '收起代码';
              };
              
              toggleBtn.onclick = handleToggle;
              pre.onclick = function() {
                if (pre.classList.contains('is-collapsed')) handleToggle();
              };
            });
          });
        }
      ]
    };
  </script>
  
  <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-java.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <!-- 移除可能冲突的官方复制插件，改用我们的自定义集成 -->
</body>
</html>
